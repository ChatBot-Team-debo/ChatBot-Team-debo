# وظائف UDP وTCP والـThreading في تطبيق الدردشة

تم إضافة وظائف UDP وTCP والـThreading إلى تطبيق الدردشة لتحسين الأداء وتوفير المزيد من الميزات للمستخدمين.

## وظائف UDP

تم إضافة دعم لبروتوكول UDP لإرسال الرسائل السريعة التي لا تتطلب ضمان التسليم. هذا مفيد للرسائل القصيرة والتنبيهات.

### الميزات المضافة:

- إرسال رسائل نصية عبر UDP للتسليم السريع
- عميل UDP مخصص للتعامل مع الرسائل
- خادم UDP للاستماع إلى الرسائل الواردة

### كيفية الاستخدام:

```javascript
// إرسال رسالة عبر UDP
fetch('/api/messages/send/:id', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({ text: 'رسالة سريعة', useUdp: true })
});
```

## وظائف TCP

تم إضافة دعم لبروتوكول TCP لنقل الملفات بشكل موثوق. هذا مفيد لمشاركة الملفات بين المستخدمين.

### الميزات المضافة:

- إرسال الملفات عبر TCP للتسليم الموثوق
- عميل TCP مخصص للتعامل مع نقل الملفات
- خادم TCP للاستماع إلى الملفات الواردة

### كيفية الاستخدام:

```javascript
// إرسال ملف عبر TCP
const formData = new FormData();
formData.append('file', fileObject);

fetch('/api/messages/send-file/:id', {
  method: 'POST',
  body: formData
});
```

## وظائف Threading

تم إضافة دعم للـThreading لتحسين أداء التطبيق عند التعامل مع العمليات المكثفة.

### الميزات المضافة:

- مدير مهام (Thread Pool) للتعامل مع المهام المتزامنة
- معالجة الملفات بشكل متزامن
- تنفيذ عمليات الدردشة بالتوازي

## الملفات الجديدة

- `lib/thread-pool.js`: مدير المهام المتزامنة
- `lib/udp-client.js`: عميل UDP للتعامل مع الرسائل السريعة
- `lib/tcp-client.js`: عميل TCP للتعامل مع نقل الملفات
- `routes/network.routes.js`: مسارات API للتعامل مع وظائف الشبكة

## الملفات المحدثة

- `lib/network.js`: تحديث لدعم وظائف UDP وTCP
- `lib/threading.js`: تحديث لدعم وظائف Threading
- `controllers/message.controller.js`: إضافة دعم لإرسال الرسائل عبر UDP والملفات عبر TCP
- `routes/message.route.js`: إضافة مسارات جديدة للتعامل مع الملفات
- `index.js`: تحديث لتهيئة خوادم UDP وTCP

## كيفية تشغيل التطبيق

1. قم بتثبيت التبعيات: `npm install`
2. قم بتشغيل الخادم: `npm start`
3. سيتم تشغيل خادم UDP على المنفذ `PORT+1`
4. سيتم تشغيل خادم TCP على المنفذ `PORT+2`

## ملاحظات

- يجب إنشاء مجلدات `uploads` و`temp` في مجلد المشروع
- يجب أن يكون لديك Node.js v14 أو أحدث لدعم وظائف Worker Threads